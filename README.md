# RED-BLACK_TREE

Проект создан в рамках курса по $C$++ Константина Владимирова.
Задача состояла в том, чтобы реализовать класс, представляющий собой сбалансированное дерево, которое находит k-й наименьший элемент (K-query) и количество элементов, меньшее заданного (N-query), за `O(log n)` времени.

## Опискание

Красно-чёрное дерево — двоичное дерево поиска, у которого каждому узлу сопоставлен дополнительный атрибут - цвет и для которого выполняются следубщие свойства:
- Каждый узел промаркирован красным или черным цветом. 
- Корень и конечные узлы (листья) дерева - черные. 
- У красного узла родительский узел - черный.
- Все простые пути из любого узла x до листьев содержат одинаковое количество черных узлов.

Все листья дерева являются фиктивными и не содеражат данных, но относятся к дереву и являются чёрными. 



# Описание проекта 

## Ввод
- Программа получает ключи и запросы от стандартных входных данных.
- Каждый запрос состоит из пары ключей (два возможных значения).
- Запрос действителен только в том случае, если второй ключ больше, чем первый; в противном случае результат для этого запроса равен нулю.


## Вывод
Для каждого запроса программа должна учитывать количество ключей в дереве, которые лежат строго в левой и правой границах запроса (включительно).

### Пример
```bash
k 10
k 20
k 15
q 10 20
```

Вывод
```bash
3
```

## Создание проекта

### Зависимости

- Компилятор, совместимый с C++17.
- CMake (минимальная версия 3.11).
- Установлен Graphviz (команда `dot`).

### Шаги

1. Клонируем репозиторий.
```
git clone https://github.com/MaxGud10/RBtree
cd RBtree
```
2. Создайте каталог сборки 
```bash
mkdir build
 ```
3. Сконфигурируйте проект с помощью CMake:
```bash
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DSET_MODE_ENABLED=OFF
```
4. Создайте проект:
```bash
cmake --build build
 ```
5. Запустите программу:
```bash
build/rb_tree.out
 ```

-----------------------------------------

# Тесты

## Запуск всех тестов через CTest

Проект содержит unit-тесты (GoogleTest) и end2end тесты.

1. Создайте тесты:
```bash
cmake --build build 
```

2. Запустите тестовый двоичный файл:
```bash
cd build
ctest --output-on-failure
```
Вы увидите 3 теста:
- `unit_all` — набор GoogleTest, проверяющих инварианты КЧ-дерева и корректность основных операций

- `e2e_small` — подаём входной файл, сравниваем stdout с эталоном

- `e2e_big_runs` - прогон на большом входе, проверка, что программа корректно отрабатывает и укладывается по времени


## Запуск unit-теста отдельно

```bach
cmake --build build --target rbtree_unit_tests
build/tests/rbtree_unit_tests
```


## Debug with std::set

Включите дополнительный режим отладки с помощью:
```bash
cmake -S . -B build -DCMAKE_BUILD_TYPE=Debug -DSET_MODE_ENABLED=ON -DCUSTOM_SET_VALUE=DEBUG
cmake --build build --target test.out
```
- В этом режиме результаты запросов диапазона из красно-чёрного дерева сравниваются с результатами из std::set и выводятся на консоль.

- Так же программа выводит графическое представление красно-чёрного дерева с помощью Graphviz. 


### Пример графического представления дерева

![dump](/graphviz/tree_graph.png)